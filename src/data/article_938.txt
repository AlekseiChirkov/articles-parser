Название: Делаем быстрый поиск по неточному совпадению среди 100 миллионов
товаров

Автор: Razoomnick

Дата: 2021-09-15, 14:16

Теги: Поисковые технологии *, .NET *, Алгоритмы *, C# *, Разработка под
e-commerce *

Контент: Это четвертая статья с этой картинкой для привлечения внимания. Она
каким-то удивительным образом опять подошла по смыслу.Мы делаем проект
по управлению большими каталогами товаров, и нам потребовалось быстро
искать товары по неточному совпадению.Забегая вперед, скажу, что от
идеи до рабочего решения на продакшене прошло пять часов.Исходная
ситуация такова: таблица в MS SQL базе, 50 миллионов записей, записи
добавляются постоянно, удаляются или обновляются крайне редко. Средняя
длина названия товара составляет 64 символа. Поиск по неточному
совпадению работает, для этого используются триграммы и полнотекстовый
индекс по столбцу с триграммами. Ранжирование результатов
осуществляется при помощи функции CONTAINSTABLE. Результаты получаются
релевантные, но поиск работает откровенно медленно, 2-5 секунд на
запрос, в зависимости от длины запроса. Мы хотим ускорить его раз в
20, а лучше в 100 подручными средствами.