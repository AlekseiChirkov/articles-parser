Название: Хранение изображений сайта в БД

Автор: SergeyPyankov

Дата: 2021-09-27, 22:07

Теги: Разработка веб-сайтов *, Delphi *, Microsoft SQL Server *, IIS *,
Разработка под Windows *

Контент: Автор должен признаться: статья родилась и выросла из довольно
небольшой и не претендующей на откровение оптимизации сайта,
описанного в другом материале. Сайт этот связан с музыкальной
тематикой и, соответственно, активно отображает обложки альбомов,
хранящиеся (до поры до времени) на сервере не в ФС, как обычно бывает,
а в БД SQL Server (в BLOB-поле, о чём несложно догадаться); в старом
варианте пора извлечения изображений из базы и сохранения их в виде
файлов возникает в момент запроса альбомов пользователем, после чего
(по истечении сессии) они удаляются.    Чтобы почти окончательно
развеять куцую интригу и помочь возможному читателю определиться с
тем, имеет ли смысл продолжить чтение, опишу конечный результат
оптимизации: обложки по-прежнему останутся в базе данных, причём в
поле того же типа, но вот веб-сервер, отдающий в итоге изображения
клиенту, будет «обманут» и станет обращаться за файлом знать не зная,
что его на самом деле нет в ФС, а вызов идёт сразу и непосредственно к
СУБД. Такой «обман» конечно же не является самоцелью – всё в основном
затевалось ради уменьшения нагрузки на дисковую подсистему.