Название: Высокопроизводительная вставка с помощью SqlBulkCopy с IDataReader

Автор: MEGADM

Дата: 2021-09-19, 12:32

Теги: .NET *, SQL *, C# *

Контент: SqlBulkCopy можно использовать в трех вариантах: вставка данных,
представленных в виде DataTable,
массива DataRowили IDataReaderэкземпляра. В этой статье я
продемонстрирую две реализации IDataReaderинтерфейса, которые
используются в сочетании с SqlBulkCopyвысокопроизводительной вставкой
в ​​базу данных. Два других варианта похожи друг на друга и могут
использоваться для относительно небольших объемов данных, поскольку
они требуют, чтобы все записи были предварительно загружены в память
перед их передачей SqlBulkCopy. Напротив, этот IDataReaderподход более
гибкий и позволяет работать с неограниченным количеством записей в
«ленивом» режиме, что означает, что данные могут
передаваться SqlBulkCopyна лету так быстро, как сервер может их
использовать. Это аналогично подходу IList<T>vs.IEnumerable<T>.